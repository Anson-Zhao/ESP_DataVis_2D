<html>
<head>
    <style>
        /*#gx, #gy, #gz, #gx2, #gy2, #gz2 {*/
        /*    width:190px; height:200px;*/
        /*    display: inline-block;*/
        /*    margin: 1em;*/
        /*}*/

        /*#gz,#gz2{*/
        /*    margin-left: 100px;*/
        /*}*/
        /*#graphx, #graphx2, #graphy, #graphy2, #graphz, #graphz2, #vector, #vector2{*/
        /*    display: inline-block;*/
        /*}*/
        #but1, #but2, #but3, #but4, #direction{
            display: inline-block;
        }

        h2 {
            display: block;
        }

        #station_one, #station_two, #station_the{
            background-color: gray;
        }

        .chart {
            float: left;
        }

        .charts, .gauges {
            /*position:relative;*/
            left: 90px;
            width: max-content;
            display: inline-table;
        }
        #compass1,#needle1{
            left: 30px;
            top:350px;
            float:left;
        }

        #depth1{
            left: 540px;
            top:350px;
        }
        #x-label1{
            position: absolute;
            left:540px;
            top:330px;
        }
        #y-label1{
            position: absolute;
            left:520px;
            top:350px;
        }

        #compass2,#needle2{
            left: 80px;
            top:1200px;
            display: inline-block;
        }
        #depth2{
            left:510px;
            top:1200px;
        }
        #x-label2{
            position: absolute;
            left:510px;
            top:1180px;
        }
        #y-label2{
            position: absolute;
            left:490px;
            top:1200px;
        }
        #y-label3{
            position: absolute;
            left:390px;
            top:2120px;
        }
        #x-label3{
            position: absolute;
            left:450px;
            top:2075px;
        }

        /*#depth2{*/
        /*    position :absolute;*/
        /*    left: 550px;*/
        /*    top:800px;*/
        /*}*/
        /*.n0, .n1, .n2 {*/
        /*    !*width: 300px;*!*/
        /*    !*height: 300px;*!*/
        /*    display: inline-table;*/
        /*}*/
        #gaugeX, #gaugeX2, #gaugeX3, #gaugeY, #gaugeY2, #gaugeY3, #gaugeZ, #gaugeZ2, #gaugeZ3{
            /*float: left;*/
            width: 250px;
            height: 250px;
            display: inline-table;
        }



/*css of new gauge*/
        .container {
            /*width: 100%;*/
            margin: 0 auto;
            font-size: 16px;
            left: 90px;
            width: max-content;
            display: inline-table;
        }
        .contain{
            float: left;
        }

        .gauge {
            width: 100%;
            max-width: 350px;
            max-height: 350px;
            min-width: 250px;
            min-height: 250px;
            padding: 0;
            /*border: 1px solid #666;*/
            /*background: #F8F8F8;*/
        }

        .gauge-data {
            text-align: center;
            color: #666;
            display: block;
            /*padding: 30px;*/
        }

        .gauge-data > * {
            display: block;
        }

        .gauge-value {
            font-size: 3em;
            position: relative;
            padding-top: 20px;

        }

        .gauge-text {
            font-size: 1.0em;
            font-weigt: normal;
            margin-top: 10px;
        }

        .gauge-unit {
            margin-top: 5px;
            font-size: .9em;
        }
    </style>
    <link rel="stylesheet" href="../jsLibrary/dygraph/dygraph.css" />

    <script src='../jsLibrary/jquery-3-4-1.min.js'></script>
    <script type="text/javascript" src="../jsLibrary/dygraph/dygraph.js"></script>
    <script src="../jsLibrary/justgage-1.2.2/raphael-2.1.4.min.js"></script>
    <script src="../jsLibrary/justgage-1.2.2/justgage.js"></script>
    <script src="../jsLibrary/gauge2-1-5.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://frogcat.github.io/canvas-arrow/canvas-arrow.js"></script>`
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.17/require.min.js"></script>

</head>


<script>
    //setting of the gauge
    var settings = {
        gaugeMinValue: -100000,
        gaugeMaxValue: 100000,
        gaugeStartValue: 0,
        gaugeStartAngle: -90,
        gaugeEndAngle: 90,
        gaugeUpdateInterval: 5000 // ms
    };

    var options = {
        tooltip: {
            enabled: false
        },
        chart: {
            type: 'gauge',
            backgroundColor: 'rgba(255, 255, 255, 0)',
            plotBackgroundColor: null,
            plotBackgroundImage: null,
            plotBorderWidth: 0,
            plotShadow: false,
            spacing: [5, 30, 5, 30],
            style: {
                fontSize: '1em'
            }
        },

        title: false,

        pane: {
            startAngle: settings.gaugeStartAngle,
            endAngle: settings.gaugeEndAngle,
            background: {
                backgroundColor: 'rgba(255, 255, 255, 0)',
                borderWidth: 0,
                innerRadius: '60%',
                outerRadius: '100%',
                shape: 'arc'
            }
        },

        plotOptions: {
            gauge: {
                // dial: {
                //  radius: 0
                //  },
                //  pivot: {
                //  radius: 0
                //  },
                dataLabels: {
                    borderWidth: 0,
                    padding: 0,
                    fontSize: 3,
                    verticalAlign: 'middle',
                    // style: false,
                    formatter: function () {
                        var output = '<div class="gauge-data">';
                        output += '<span class="gauge-value">' + this.y + '</span>';
                        output += '</div>';

                        return output;
                    },
                    useHTML: true
                }
            },
            pie: {
                dataLabels: {
                    enabled: true,
                    distance: -10,
                    style: false
                },
                startAngle: settings.gaugeStartAngle,
                endAngle: settings.gaugeEndAngle,
                center: ['50%', '50%'],
                states: {
                    hover: {
                        enabled: false
                    }
                }
            }
        },

        // the value axis
        yAxis: {
            offset: 0,
            min: settings.gaugeMinValue,
            max: settings.gaugeMaxValue,

            title: false,

            minorTickWidth: 0,
            //the interval of the short line
            tickPixelInterval: 30,
            tickWidth: 2,
            tickPosition: 'outside',
            //the length of the short line
            tickLength: 15,
            tickColor: '#666666',
            lineColor: '#666666',
            labels: {
                //distance between the line and number
                distance: 25,
                rotation: "0",
                step: 2,
            },

            plotBands: [{
                thickness: 15,
                outerRadius: "120%",
                from: -100000,
                to: -75000,
                color: '#FB8585' // red
            }, {
                thickness: 15,
                outerRadius: "120%",
                from: 100000,
                to: 75000,
                color: '#FB8585' // red
            }, {
                thickness: 15,
                outerRadius: "120%",
                from: -50000,
                to: 50000,
                color: '#83DAD9'
            }, {
                thickness: 15,
                outerRadius: "120%",
                from: 50000,
                to: 75000,
                color: '#F9E7AE'
            }, {
                thickness: 15,
                outerRadius: "120%",
                from: -50000,
                to: -75000,
                color: '#F9E7AE'
            }
            ]
        },

        series: [{
            type: 'gauge',
            data: [settings.gaugeStartValue],
        }, {
            type : 'pie',
            innerSize : '96%',
            data : [{
                y : settings.gaugeStartValue,
                name : "",
                color : "#0bbeba"
            }, {
                y : settings.gaugeMaxValue - settings.gaugeStartValue,
                name : '',
                color : "#666666"
            }]
        }],

        navigation: {
            buttonOptions: {
                enabled: false
            }
        },

        credits: false
    };
</script>



<body onload="init()">

<div id="but0">
    <!--    <p>Historical Data Charts &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>-->
    <button onclick='window.location.replace("historical.html")'>Historical Data</button>
</div>
<br><br>

<div id="control_button">
    <h1>control area</h1>
</div>

<div id="gauge">
    <h1>Gauge</h1>
    <h2>The gauges represent live X (N-S), Y (E-W), Z (+ - altitude) from the ESP Stations with a 42-minute delay</h2>
</div>

<div id="live_chart">
    <h1>Live Chart</h1>
    <h2>The charts represent 2 minutes of live data from the ESP-1 Station, with a 2-minute delay</h2>
</div>

<button onclick = "query();" id="fakeBu"></button>

<script type="text/javascript">
    //I want array with string inside
    var stations = [];
    //single station name that we are going to deal with
    //5s average gauge data
    var sta;

    loadDoc();
    function loadDoc() {
        $.ajax({
            url: "http://localhost:3005/stations",
            method: "get",
            data: "sent",
            success: function(res) {
                console.log("This is the stations result:");
                console.log(res);
                for(var i=0; i<res.length; i++){
                    console.log("This is the station being called:");
                    console.log(res[i].StationId);
                    building(res[i].StationId);
                    stations[i]=res[i].StationId;
                }
                if(stations.length === res.length){
                    query()
                }

            }
        });
    }



    function building(station){
        console.log("begin build struture");
        //Notification: space means two classes, '_' means one class.

        //add the title button Div
        var butDiv = document.createElement("p");
        butDiv.id = station+"_button";
        butDiv.textContent = station;

        //add the control button
        var button = document.createElement("button");
        button.id = station;
        button.textContent = station;
        button.setAttribute("style", "display: inline-block; background-color: gray;");
        // button.onclick = check(this);
        $('#control_button').append(butDiv).append(button);

        //add gauge title
        var Gtitle = document.createElement("h2");
        Gtitle.className = station;
        Gtitle.textContent = station;
        // $('#gauge').append(Gtitle);

        //add gauge Div
        var gaugeDiv = document.createElement("div");
        gaugeDiv.className = station+" container";
        gaugeDiv.setAttribute("style", "margin: 0 auto; font-size: 16px; left: 90px; width: max-content; display: inline-table;");
        $('#gauge').append(Gtitle).append(gaugeDiv);

        //add xyz divs into gauge Div
        var gdivX = document.createElement("div");
        var gdivY = document.createElement("div");
        var gdivZ = document.createElement("div");
        gdivX.className = "contain n0";
        gdivY.className = "contain n1";
        gdivZ.className = "contain n2";
        gdivX.id = station+"_gaugeX";
        gdivY.id = station+"_gaugeY";
        gdivZ.id = station+"_gaugeZ";
        gdivX.setAttribute("style", "float: left; width: 250px; height: 250px; display: inline-table;");
        gdivY.setAttribute("style", "float: left; width: 250px; height: 250px; display: inline-table;");
        gdivZ.setAttribute("style", "float: left; width: 250px; height: 250px; display: inline-table;");
        var b = "."+station+".container";
        $(b).append(gdivX).append(gdivY).append(gdivZ);

        //add live chart title
        var cTitle = document.createElement("h2");
        cTitle.className = station;
        cTitle.textContent = station;

        //add live chart Div
        var chartDiv = document.createElement("div");
        chartDiv.className = station+" charts";
        chartDiv.setAttribute("style", "left: 90px; width: max-content; display: inline-table;");
        $('#live_chart').append(cTitle).append(chartDiv);

        //add xyz divs into live chart Div
        var cdivX = document.createElement("div");
        var cdivY = document.createElement("div");
        var cdivZ = document.createElement("div");
        cdivX.className = "chart n0";
        cdivY.className = "chart n1";
        cdivZ.className = "chart n2";
        cdivX.id = station+"_graphX";
        cdivY.id = station+"_graphY";
        cdivZ.id = station+"_graphZ";
        cdivX.setAttribute("style", "float: left;");
        cdivY.setAttribute("style", "float: left;");
        cdivZ.setAttribute("style", "float: left;");
        var c = "."+station+".charts";
        $(c).append(cdivX).append(cdivY).append(cdivZ);
        console.log("structure done");
    }

    function query() {
        console.log("ask for query");
        console.log(stations);
        $.ajax({
            url: "http://localhost:3005/querys",
            method: "get",
            data: {stations: stations},
            //Says success isn't used but it is
            success: function(res){
                console.log("query result");
                console.log(res);
                for(var i=0; i<res.length; i++){
                    var x_arr = [];
                    var y_arr = [];
                    var z_arr = [];

                    res[i][1].forEach(function(el,i) {
                            x_arr[i] = [new Date(el.time), el.X];
                            y_arr[i] = [new Date(el.time), el.Y];
                            z_arr[i] = [new Date(el.time), el.Z];
                        }
                    );

                    sta = avg(res[i][1],5);
                    console.log(sta);
                    Z = new Dygraph(
                        // containing div
                        document.getElementById(res[i][0]+"_graphZ"),

                        // CSV or path to a CSV file.
                        z_arr,
                        {
                            labels: [ "Data", "Z" ],
                            animatedZooms: true,
                            legend: 'always',
                            showRoller: true,
                            title: "+Z is positive altitude, -Z is below ground (unit: nT)",
                        }

                    );
                    Y = new Dygraph(
                        // containing div
                        document.getElementById(res[i][0]+"_graphY"),

                        // CSV or path to a CSV file.
                        y_arr,
                        {
                            labels: [ "Data", "Y" ],
                            animatedZooms: true,
                            legend: 'always',
                            showRoller: true,
                            title: "+Y is east, -Y is west (unit: nT)"
                        }

                    );
                    X = new Dygraph(

                        // containing div
                        document.getElementById(res[i][0]+"_graphX"),

                        // CSV or path to a CSV file.
                        x_arr,
                        {
                            labels: [ "Data", "X" ],
                            animatedZooms: true,
                            legend: 'always',
                            showRoller: true,
                            title: "+X is north, -X is south (unit: nT)"
                        }

                    );
                    $('#'+res[i][0]+'_gaugeX').highcharts(options, buildGraph);
                    $('#'+res[i][0]+'_gaugeY').highcharts(options, buildGraph);
                    $('#'+res[i][0]+'_gaugeZ').highcharts(options, buildGraph);
                }
            }
        });
    }

    function buildGraph(chart) {
        var a = $(this)[0].renderTo.className.slice(-1);
        if (!chart.renderer.forExport) {
            var gaugePoint = chart.series[0].points[0];
            var newVal = parseInt(sta[a]);
            gaugePoint.update(newVal);
        }
    }

    function check(objButton) {
        var x = document.getElementsByClassName(objButton.value);
        // console.log(objButton.value);
        var y = '.'+objButton.value;
        var z = '#'+objButton.value;
        console.log(y);
        if (x[0].style.display === "none") {
            $(y).show();
            $(z).css('backgroundColor', 'gray');
        } else {
            $(y).hide();
            $(z).css('backgroundColor', 'white');
        }
    }

    function avg(res,len){
        var xa, ya, za;
        var arr = res.slice(Math.max(res.length - len, 1));
        xa = ya = za = 0;
        for(var i = 0; i<arr.length; i++){
            xa += arr[i].X;
            ya += arr[i].Y;
            za += arr[i].Z
        }
        xa = xa/len;
        ya = ya/len;
        za = za/len;
        return [xa, ya, za];
    }

    function imgLoaded() {
        // Image loaded event complete.  Start the timer
        console.log('loaded');
        setInterval(draw, 5000);
    }

    function imgLoaded2() {
        // Image loaded event complete.  Start the timer
        setInterval(draw2, 5000);
    }

    function imgLoaded3() {
        // Image loaded event complete.  Start the timer
        setInterval(draw3, 5000);
    }

    function draw() {

        console.log(staone);

        console.log('Station 1 heading:'+calcAngleDegrees(staone[0], staone[1]));

        let degrees = calcAngleDegrees(staone[0], staone[1]);
        clearCanvas();

        // Draw the compass onto the canvas
        ctx.drawImage(img, 0, 0);

        // Save the current drawing state
        ctx.save();

        // Now move across and down half the
        ctx.translate(153, 140);

        // Rotate around this point
        ctx.rotate(degrees * (Math.PI / 180));

        // Draw the image back and up
        ctx.drawImage(needle, -172, -172);

        // Restore the previous drawing state
        ctx.restore();

    }

    function draw2() {

        console.log(statwo);

        console.log('Station 2 heading2:'+calcAngleDegrees(statwo[0], statwo[1]));
        //
        let degrees2 = calcAngleDegrees(statwo[0], statwo[1]);
        clearCanvas2();

        // Draw the compass onto the canvas
        ctx2.drawImage(img2, 0, 0);

        // Save the current drawing state
        ctx2.save();

        // Now move across and down half the
        ctx2.translate(153, 140);

        // Rotate around this point
        ctx2.rotate(degrees2 * (Math.PI / 180));

        // Draw the image back and up
        ctx2.drawImage(needle2, -172, -172);
        // setInterval(drawNeedle2, 3000);

        // // Restore the previous drawing state
        ctx2.restore();
    }

    function draw3() {

        console.log(stathe);

        console.log('Station 3 heading3:'+calcAngleDegrees(stathe[0], stathe[1]));
        //
        let degrees3 = calcAngleDegrees(stathe[0], stathe[1]);
        clearCanvas3();

        // Draw the compass onto the canvas
        ctx3.drawImage(img3, 0, 0);

        // Save the current drawing state
        ctx3.save();

        // Now move across and down half the
        ctx3.translate(153, 140);

        // Rotate around this point
        ctx3.rotate(degrees3 * (Math.PI / 180));

        // Draw the image back and up
        ctx3.drawImage(needle3, -172, -172);
        // setInterval(drawNeedle2, 3000);

        // // Restore the previous drawing state
        ctx3.restore();
    }

    function clearCanvas3() {
        // clear canvas
        ctx3.clearRect(0, 0, 300, 300);
        // ctx2.clearRect(0, 0, 300, 300);
    }

    function clearCanvas2() {
        // clear canvas
        ctx2.clearRect(0, 0, 300, 300);
        // ctx2.clearRect(0, 0, 300, 300);
    }

    function clearCanvas() {
        // clear canvas
        ctx.clearRect(0, 0, 300, 300);
        // ctx2.clearRect(0, 0, 300, 300);
    }

    function calcAngleDegrees(x, y) {
        return Math.atan2(y, x) * 180 / Math.PI;
    }

    function calcLength(x, y) {
        var sum = Math.pow(x,2) + Math.pow(y,2) ;
        console.log(sum);
        return Math.sqrt(sum);
    }

    function init() {
        // Grab the compass element
        var canvas3 = document.getElementById('compass3');
        canvas3.style.position = "absolute";
        document.getElementById('depth3').style.position = 'absolute';

        // Canvas supported?
        if (canvas3.getContext('2d')) {
            ctx3 = canvas3.getContext('2d');

            // Load the needle image
            needle3 = new Image();
            needle3.src = 'jsLibrary/compass/needle.png';

            // Load the compass image
            img3 = new Image();
            img3.src = 'jsLibrary/compass/compass.png';
            img3.onload = imgLoaded3;
        } else {
            alert("Canvas not supported!");
        }

        // Grab the compass element
        var canvas2 = document.getElementById('compass2');
        canvas2.style.position = "absolute";
        document.getElementById('depth2').style.position = 'absolute';

        // Canvas supported?
        if (canvas2.getContext('2d')) {
            ctx2 = canvas2.getContext('2d');

            // Load the needle image
            needle2 = new Image();
            needle2.src = 'jsLibrary/compass/needle.png';

            // Load the compass image
            img2 = new Image();
            img2.src = 'jsLibrary/compass/compass.png';
            img2.onload = imgLoaded2;
        } else {
            alert("Canvas not supported!");
        }

        // Grab the compass element
        var canvas = document.getElementById('compass1');
        canvas.style.position = "absolute";
        document.getElementById('depth1').style.position = 'absolute';
        // var canvas2 = document.getElementById('compass2');

        // Canvas supported?
        if (canvas.getContext('2d')) {
            ctx = canvas.getContext('2d');

            // Load the needle image
            needle = new Image();
            needle.src = 'jsLibrary/compass/needle.png';

            // Load the compass image
            img = new Image();
            img.src = 'jsLibrary/compass/compass.png';
            img.onload = imgLoaded;
        } else {
            alert("Canvas not supported!");
        }

    }

    function coordinate(){
        var grid_size = 30;
        var x_axis_distance_grid_lines = 0;
        var y_axis_distance_grid_lines = 0;
        var x_axis_starting_point = { number: 5000, suffix: '' };
        var y_axis_starting_point = { number: 5000, suffix: '' };

        var canvas = document.getElementById("depth1");
        var ctx = canvas.getContext("2d");

        // canvas width
        var canvas_width = canvas.width;

        // canvas height
        var canvas_height = canvas.height;

        // no of vertical grid lines
        var num_lines_x = Math.floor(canvas_height/grid_size);

        // no of horizontal grid lines
        var num_lines_y = Math.floor(canvas_width/grid_size);
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        ctx.save();
        // Draw grid lines along X-axis
        for(var i=0; i<=num_lines_x; i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;

            // If line represents X-axis draw in different color
            if(i === x_axis_distance_grid_lines)
                ctx.strokeStyle = "#000000";
            else
                ctx.strokeStyle = "#e9e9e9";

            if(i === num_lines_x) {
                ctx.moveTo(0, grid_size*i);
                ctx.lineTo(canvas_width, grid_size*i);
            }
            else {
                ctx.moveTo(0, grid_size*i+0.5);
                ctx.lineTo(canvas_width, grid_size*i+0.5);
            }
            ctx.stroke();
        }
        // Draw grid lines along Y-axis
        for(i=0; i<=num_lines_y; i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;

            // If line represents Y-axis draw in different color
            if(i == y_axis_distance_grid_lines)
                ctx.strokeStyle = "#000000";
            else
                ctx.strokeStyle = "#e9e9e9";

            if(i == num_lines_y) {
                ctx.moveTo(grid_size*i, 0);
                ctx.lineTo(grid_size*i, canvas_height);
            }
            else {
                ctx.moveTo(grid_size*i+0.5, 0);
                ctx.lineTo(grid_size*i+0.5, canvas_height);
            }
            ctx.stroke();
        }


        ctx.translate(y_axis_distance_grid_lines*grid_size, x_axis_distance_grid_lines*grid_size);
        // Ticks marks along the positive X-axis
        for(i=1; i<(num_lines_y - y_axis_distance_grid_lines); i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;
            ctx.strokeStyle = "#000000";

            // Draw a tick mark 6px long (-3 to 3)
            ctx.moveTo(grid_size*i+0.5, -3);
            ctx.lineTo(grid_size*i+0.5, 3);
            ctx.stroke();

            // Text value at that point
            ctx.font = '9px Arial';
            ctx.textAlign = 'start';
            ctx.fillText(x_axis_starting_point.number*i + x_axis_starting_point.suffix, grid_size*i-2, 15);
        }

        // Ticks marks along the negative X-axis
        for(i=1; i<y_axis_distance_grid_lines; i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;
            ctx.strokeStyle = "#000000";

            // Draw a tick mark 6px long (-3 to 3)
            ctx.moveTo(-grid_size*i+0.5, -3);
            ctx.lineTo(-grid_size*i+0.5, 3);
            ctx.stroke();

            // Text value at that point
            ctx.font = '9px Arial';
            ctx.textAlign = 'end';
            ctx.fillText(-x_axis_starting_point.number*i + x_axis_starting_point.suffix, -grid_size*i+3, 15);
        }

        // Ticks marks along the positive Y-axis
        // Positive Y-axis of graph is negative Y-axis of the canvas
        for(i=1; i<(num_lines_x - x_axis_distance_grid_lines); i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;
            ctx.strokeStyle = "#000000";

            // Draw a tick mark 6px long (-3 to 3)
            ctx.moveTo(-3, grid_size*i+0.5);
            ctx.lineTo(3, grid_size*i+0.5);
            ctx.stroke();

            // Text value at that point
            ctx.font = '9px Arial';
            ctx.textAlign = 'start';
            ctx.fillText(-y_axis_starting_point.number*i + y_axis_starting_point.suffix, 8, grid_size*i+3);
        }

        // Ticks marks along the negative Y-axis
        // Negative Y-axis of graph is positive Y-axis of the canvas
        for(i=1; i<x_axis_distance_grid_lines; i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;
            ctx.strokeStyle = "#000000";

            // Draw a tick mark 6px long (-3 to 3)
            ctx.moveTo(-3, -grid_size*i+0.5);
            ctx.lineTo(3, -grid_size*i+0.5);
            ctx.stroke();

            // Text value at that point
            ctx.font = '9px Arial';
            ctx.textAlign = 'start';
            ctx.fillText(y_axis_starting_point.number*i + y_axis_starting_point.suffix, 8, -grid_size*i+3);
        }


        var labelX = document.getElementById("x-label1");
        var ctxLabelX = labelX.getContext("2d");
        ctxLabelX.clearRect(0, 0, labelX.width, labelX.height);
        ctxLabelX.font = "10px Arial";
        ctxLabelX.fillText("direction",labelX.width/2 -20, labelX.height/2);

        var labelY = document.getElementById("y-label1");
        var ctxLabelY = labelY.getContext("2d");
        ctxLabelY.clearRect(0, 0, labelY.width, labelY.height);
        ctxLabelY.save();
        ctxLabelY.translate(140, 105);
        ctxLabelY.rotate(Math.PI/2);
        ctxLabelY.fillText("depth",labelY.width/2, labelY.height/2);
        ctxLabelY.restore();
        zArrow1();
    }

    function coordinate2(){
        var grid_size = 30;
        var x_axis_distance_grid_lines = 0;
        var y_axis_distance_grid_lines = 0;
        var x_axis_starting_point = { number: 5000, suffix: '' };
        var y_axis_starting_point = { number: 5000, suffix: '' };

        var canvas = document.getElementById("depth2");
        var ctx = canvas.getContext("2d");

        // canvas width
        var canvas_width = canvas.width;

        // canvas height
        var canvas_height = canvas.height;

        // no of vertical grid lines
        var num_lines_x = Math.floor(canvas_height/grid_size);

        // no of horizontal grid lines
        var num_lines_y = Math.floor(canvas_width/grid_size);
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw grid lines along X-axis
        for(var i=0; i<=num_lines_x; i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;

            // If line represents X-axis draw in different color
            if(i === x_axis_distance_grid_lines)
                ctx.strokeStyle = "#000000";
            else
                ctx.strokeStyle = "#e9e9e9";

            if(i === num_lines_x) {
                ctx.moveTo(0, grid_size*i);
                ctx.lineTo(canvas_width, grid_size*i);
            }
            else {
                ctx.moveTo(0, grid_size*i+0.5);
                ctx.lineTo(canvas_width, grid_size*i+0.5);
            }
            ctx.stroke();
        }
        // Draw grid lines along Y-axis
        for(i=0; i<=num_lines_y; i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;

            // If line represents Y-axis draw in different color
            if(i == y_axis_distance_grid_lines)
                ctx.strokeStyle = "#000000";
            else
                ctx.strokeStyle = "#e9e9e9";

            if(i == num_lines_y) {
                ctx.moveTo(grid_size*i, 0);
                ctx.lineTo(grid_size*i, canvas_height);
            }
            else {
                ctx.moveTo(grid_size*i+0.5, 0);
                ctx.lineTo(grid_size*i+0.5, canvas_height);
            }
            ctx.stroke();
        }

        ctx.translate(y_axis_distance_grid_lines*grid_size, x_axis_distance_grid_lines*grid_size);

        // Ticks marks along the positive X-axis
        for(i=1; i<(num_lines_y - y_axis_distance_grid_lines); i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;
            ctx.strokeStyle = "#000000";

            // Draw a tick mark 6px long (-3 to 3)
            ctx.moveTo(grid_size*i+0.5, -3);
            ctx.lineTo(grid_size*i+0.5, 3);
            ctx.stroke();

            // Text value at that point
            ctx.font = '9px Arial';
            ctx.textAlign = 'start';
            ctx.fillText(x_axis_starting_point.number*i + x_axis_starting_point.suffix, grid_size*i-2, 15);
        }

        // Ticks marks along the negative X-axis
        for(i=1; i<y_axis_distance_grid_lines; i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;
            ctx.strokeStyle = "#000000";

            // Draw a tick mark 6px long (-3 to 3)
            ctx.moveTo(-grid_size*i+0.5, -3);
            ctx.lineTo(-grid_size*i+0.5, 3);
            ctx.stroke();

            // Text value at that point
            ctx.font = '9px Arial';
            ctx.textAlign = 'end';
            ctx.fillText(-x_axis_starting_point.number*i + x_axis_starting_point.suffix, -grid_size*i+3, 15);
        }

        // Ticks marks along the positive Y-axis
        // Positive Y-axis of graph is negative Y-axis of the canvas
        for(i=1; i<(num_lines_x - x_axis_distance_grid_lines); i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;
            ctx.strokeStyle = "#000000";

            // Draw a tick mark 6px long (-3 to 3)
            ctx.moveTo(-3, grid_size*i+0.5);
            ctx.lineTo(3, grid_size*i+0.5);
            ctx.stroke();

            // Text value at that point
            ctx.font = '9px Arial';
            ctx.textAlign = 'start';
            ctx.fillText(-y_axis_starting_point.number*i + y_axis_starting_point.suffix, 8, grid_size*i+3);
        }

        // Ticks marks along the negative Y-axis
        // Negative Y-axis of graph is positive Y-axis of the canvas
        for(i=1; i<x_axis_distance_grid_lines; i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;
            ctx.strokeStyle = "#000000";

            // Draw a tick mark 6px long (-3 to 3)
            ctx.moveTo(-3, -grid_size*i+0.5);
            ctx.lineTo(3, -grid_size*i+0.5);
            ctx.stroke();

            // Text value at that point
            ctx.font = '9px Arial';
            ctx.textAlign = 'start';
            ctx.fillText(y_axis_starting_point.number*i + y_axis_starting_point.suffix, 8, -grid_size*i+3);
        }

        var labelX = document.getElementById("x-label2");
        var ctxLabelX = labelX.getContext("2d");
        ctxLabelX.clearRect(0, 0, labelX.width, labelX.height);
        ctxLabelX.font = "10px Arial";
        ctxLabelX.fillText("direction",labelX.width/2 -20, labelX.height/2);

        var labelY = document.getElementById("y-label2");
        var ctxLabelY = labelY.getContext("2d");
        ctxLabelY.clearRect(0, 0, labelY.width, labelY.height);
        ctxLabelY.save();
        ctxLabelY.translate(140, 105);
        ctxLabelY.rotate(Math.PI/2);
        ctxLabelY.fillText("depth",labelY.width/2, labelY.height/2);
        ctxLabelY.restore();
        // ctx.arrow()
        zArrow2();
    }

    function coordinate3(){
        var grid_size = 30;
        var x_axis_distance_grid_lines = 0;
        var y_axis_distance_grid_lines = 0;
        var x_axis_starting_point = { number: 5000, suffix: '' };
        var y_axis_starting_point = { number: 5000, suffix: '' };

        var canvas = document.getElementById("depth3");
        var ctx = canvas.getContext("2d");

        // canvas width
        var canvas_width = canvas.width;

        // canvas height
        var canvas_height = canvas.height;

        // no of vertical grid lines
        var num_lines_x = Math.floor(canvas_height/grid_size);

        // no of horizontal grid lines
        var num_lines_y = Math.floor(canvas_width/grid_size);
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw grid lines along X-axis
        for(var i=0; i<=num_lines_x; i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;

            // If line represents X-axis draw in different color
            if(i === x_axis_distance_grid_lines)
                ctx.strokeStyle = "#000000";
            else
                ctx.strokeStyle = "#e9e9e9";

            if(i === num_lines_x) {
                ctx.moveTo(0, grid_size*i);
                ctx.lineTo(canvas_width, grid_size*i);
            }
            else {
                ctx.moveTo(0, grid_size*i+0.5);
                ctx.lineTo(canvas_width, grid_size*i+0.5);
            }
            ctx.stroke();
        }
        // Draw grid lines along Y-axis
        for(i=0; i<=num_lines_y; i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;

            // If line represents Y-axis draw in different color
            if(i == y_axis_distance_grid_lines)
                ctx.strokeStyle = "#000000";
            else
                ctx.strokeStyle = "#e9e9e9";

            if(i == num_lines_y) {
                ctx.moveTo(grid_size*i, 0);
                ctx.lineTo(grid_size*i, canvas_height);
            }
            else {
                ctx.moveTo(grid_size*i+0.5, 0);
                ctx.lineTo(grid_size*i+0.5, canvas_height);
            }
            ctx.stroke();
        }

        ctx.translate(y_axis_distance_grid_lines*grid_size, x_axis_distance_grid_lines*grid_size);

        // Ticks marks along the positive X-axis
        for(i=1; i<(num_lines_y - y_axis_distance_grid_lines); i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;
            ctx.strokeStyle = "#000000";

            // Draw a tick mark 6px long (-3 to 3)
            ctx.moveTo(grid_size*i+0.5, -3);
            ctx.lineTo(grid_size*i+0.5, 3);
            ctx.stroke();

            // Text value at that point
            ctx.font = '9px Arial';
            ctx.textAlign = 'start';
            ctx.fillText(x_axis_starting_point.number*i + x_axis_starting_point.suffix, grid_size*i-2, 15);
        }

        // Ticks marks along the negative X-axis
        for(i=1; i<y_axis_distance_grid_lines; i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;
            ctx.strokeStyle = "#000000";

            // Draw a tick mark 6px long (-3 to 3)
            ctx.moveTo(-grid_size*i+0.5, -3);
            ctx.lineTo(-grid_size*i+0.5, 3);
            ctx.stroke();

            // Text value at that point
            ctx.font = '9px Arial';
            ctx.textAlign = 'end';
            ctx.fillText(-x_axis_starting_point.number*i + x_axis_starting_point.suffix, -grid_size*i+3, 15);
        }

        // Ticks marks along the positive Y-axis
        // Positive Y-axis of graph is negative Y-axis of the canvas
        for(i=1; i<(num_lines_x - x_axis_distance_grid_lines); i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;
            ctx.strokeStyle = "#000000";

            // Draw a tick mark 6px long (-3 to 3)
            ctx.moveTo(-3, grid_size*i+0.5);
            ctx.lineTo(3, grid_size*i+0.5);
            ctx.stroke();

            // Text value at that point
            ctx.font = '9px Arial';
            ctx.textAlign = 'start';
            ctx.fillText(-y_axis_starting_point.number*i + y_axis_starting_point.suffix, 8, grid_size*i+3);
        }

        // Ticks marks along the negative Y-axis
        // Negative Y-axis of graph is positive Y-axis of the canvas
        for(i=1; i<x_axis_distance_grid_lines; i++) {
            ctx.beginPath();
            ctx.lineWidth = 1;
            ctx.strokeStyle = "#000000";

            // Draw a tick mark 6px long (-3 to 3)
            ctx.moveTo(-3, -grid_size*i+0.5);
            ctx.lineTo(3, -grid_size*i+0.5);
            ctx.stroke();

            // Text value at that point
            ctx.font = '9px Arial';
            ctx.textAlign = 'start';
            ctx.fillText(y_axis_starting_point.number*i + y_axis_starting_point.suffix, 8, -grid_size*i+3);
        }

        var labelX = document.getElementById("x-label3");
        var ctxLabelX = labelX.getContext("2d");
        ctxLabelX.clearRect(0, 0, labelX.width, labelX.height);
        ctxLabelX.font = "10px Arial";
        ctxLabelX.fillText("direction",labelX.width/2 -20, labelX.height/2);

        var labelY = document.getElementById("y-label3");
        var ctxLabelY = labelY.getContext("2d");
        ctxLabelY.clearRect(0, 0, labelY.width, labelY.height);
        ctxLabelY.save();
        ctxLabelY.translate(140, 105);
        ctxLabelY.rotate(Math.PI/2);
        ctxLabelY.fillText("depth",labelY.width/2, labelY.height/2);
        ctxLabelY.restore();
        // ctx.arrow()
        zArrow3();
    }

    function zArrow2(){
        var compX = calcLength(statwo[0],statwo[1]);

        var scaleX = compX/5000;
        var x= scaleX*30;
        var scaleY = Math.abs(statwo[2])/5000;
        var y = scaleY*30;

        var canvas = document.getElementById("depth2");
        var context = canvas.getContext("2d");

        context.beginPath();
        context.arrow(0, 0, x, y, [0, 1, -10, 1, -10, 5]);
        // context.arrow(0, 0, x, y, [0, 1, -10, 1, -10, 5]);
        context.fill();
    }

    function zArrow1(){
        var compX = calcLength(staone[0],staone[1]);

        var scaleX = compX/5000;
        var x= scaleX*30;
        var scaleY = Math.abs(staone[2])/5000;
        var y = scaleY*30;

        var canvas = document.getElementById("depth1");
        var context = canvas.getContext("2d");

        context.beginPath();
        context.arrow(0, 0, x, y, [0, 1, -10, 1, -10, 5]);
        context.fill();
    }

    function zArrow3(){
        var compX = calcLength(stathe[0],stathe[1]);

        var scaleX = compX/5000;
        var x= scaleX*30;
        var scaleY = Math.abs(stathe[2])/5000;
        var y = scaleY*30;

        var canvas = document.getElementById("depth3");
        var context = canvas.getContext("2d");

        context.beginPath();
        context.arrow(0, 0, x, y, [0, 1, -10, 1, -10, 5]);
        context.fill();
    }





</script>

</body>
</html>